{
  "name": "Smoking",
  "remarks": [
    "https://www.cdc.gov/tobacco/data_statistics/mmwrs/byyear/2018/mm6702a1/highlights.htm\n\nhttps://www.cdc.gov/tobacco/data_statistics/fact_sheets/adult_data/cig_smoking/index.htm\n\n***more stats here"
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "direct_transition": "Smoker_Attribute_Default"
    },
    "Terminal": {
      "type": "Terminal"
    },
    "Smoking_Age_Guard": {
      "type": "Guard",
      "allow": {
        "condition_type": "Age",
        "operator": ">=",
        "quantity": 16,
        "unit": "years",
        "value": 0
      },
      "direct_transition": "Start_Smoking_Delay"
    },
    "Smoker_Attribute": {
      "type": "SetAttribute",
      "attribute": "smoker",
      "direct_transition": "Quit_Smoking_Delay",
      "value": true
    },
    "Start_Smoking": {
      "type": "Simple",
      "direct_transition": "Time_Smoking_Attribute_Set"
    },
    "Start_Smoking_Delay": {
      "type": "Delay",
      "exact": {
        "quantity": 1,
        "unit": "months"
      },
      "conditional_transition": [
        {
          "transition": "Before_1970_Probability",
          "condition": {
            "condition_type": "Date",
            "operator": "<",
            "year": 1970,
            "value": 0
          }
        },
        {
          "transition": "1970-1980_Probability",
          "condition": {
            "condition_type": "And",
            "conditions": [
              {
                "condition_type": "Date",
                "operator": ">=",
                "year": 1970,
                "value": 0
              },
              {
                "condition_type": "Date",
                "operator": "<",
                "year": 1980,
                "value": 0
              }
            ]
          }
        },
        {
          "transition": "1980-1990_Probability",
          "condition": {
            "condition_type": "And",
            "conditions": [
              {
                "condition_type": "Date",
                "operator": ">=",
                "year": 1980,
                "value": 0
              },
              {
                "condition_type": "Date",
                "operator": "<",
                "year": 1990,
                "value": 0
              }
            ]
          }
        },
        {
          "transition": "1990-2000_Probability",
          "condition": {
            "condition_type": "And",
            "conditions": [
              {
                "condition_type": "Date",
                "operator": ">=",
                "year": 1990,
                "value": 0
              },
              {
                "condition_type": "Date",
                "operator": "<",
                "year": 2000,
                "value": 0
              }
            ]
          }
        },
        {
          "transition": "2000-2010_Probability",
          "condition": {
            "condition_type": "And",
            "conditions": [
              {
                "condition_type": "Date",
                "operator": ">=",
                "year": 2000,
                "value": 0
              },
              {
                "condition_type": "Date",
                "operator": "<",
                "year": 2010,
                "value": 0
              }
            ]
          }
        },
        {
          "transition": "After_2010_Probability",
          "condition": {
            "condition_type": "Date",
            "operator": ">=",
            "year": 2010,
            "value": 0
          }
        }
      ],
      "remarks": [
        "16.1% of MA are smokers in 2016.",
        "http://www.cdc.gov/tobacco/data_statistics/state_data/state_highlights/2010/states/massachusetts/",
        "but the rate is decreasing over time",
        "http://www.cdc.gov/tobacco/data_statistics/tables/trends/cig_smoking/",
        "selected #s:",
        "1965 - 42.4%",
        "1975 - 37.1%",
        "1985 - 30.1%",
        "1995 - 24.7%",
        "2005 - 20.9%",
        "2015 - 16.1%",
        "assume that it was never significantly higher than 42% pre-1960s, but will continue to drop",
        "slowly after 2016",
        "it's decreasing about .5% per year"
      ]
    },
    "Quit_Smoking_Delay": {
      "type": "Delay",
      "exact": {
        "quantity": 1,
        "unit": "months"
      },
      "conditional_transition": [
        {
          "transition": "Quit_Probability_16-24",
          "condition": {
            "condition_type": "And",
            "conditions": [
              {
                "condition_type": "Age",
                "operator": ">=",
                "quantity": 16,
                "unit": "years",
                "value": 0
              },
              {
                "condition_type": "Age",
                "operator": "<",
                "quantity": 25,
                "unit": "years",
                "value": 0
              }
            ]
          }
        },
        {
          "transition": "Quit_Probability_25-44",
          "condition": {
            "condition_type": "And",
            "conditions": [
              {
                "condition_type": "Age",
                "operator": ">=",
                "quantity": 25,
                "unit": "years",
                "value": 0
              },
              {
                "condition_type": "Age",
                "operator": "<",
                "quantity": 45,
                "unit": "years",
                "value": 0
              }
            ]
          }
        },
        {
          "transition": "Quit_Probability_45-64",
          "condition": {
            "condition_type": "And",
            "conditions": [
              {
                "condition_type": "Age",
                "operator": ">=",
                "quantity": 45,
                "unit": "years",
                "value": 0
              },
              {
                "condition_type": "Age",
                "operator": "<",
                "quantity": 65,
                "unit": "years",
                "value": 0
              }
            ]
          }
        },
        {
          "transition": "Quit_Probability_Over_65",
          "condition": {
            "condition_type": "Age",
            "operator": ">=",
            "quantity": 65,
            "unit": "years",
            "value": 0
          }
        }
      ],
      "remarks": [
        "https://www.cdc.gov/tobacco/data_statistics/fact_sheets/cessation/quitting/index.htm",
        "Percentage of adult daily cigarette smokers who stopped smoking for more than 1 day in 2015 because they were trying to quit:",
        "Nearly 7 out of 10 (66.7%) smokers aged 18–24 years",
        "Nearly 6 out of 10 (59.8%) smokers aged 25–44 years",
        "More than 4 out of 10 (49.6%) smokers aged 45–64 years",
        "About 4 out of 10 (47.2%) smokers aged 65 years or older"
      ]
    },
    "Time_Smoking": {
      "type": "Counter",
      "attribute": "time_smoking_in_months",
      "action": "increment",
      "direct_transition": "Quit_Smoking_Delay"
    },
    "Time_Smoking_Attribute_Set": {
      "type": "SetAttribute",
      "attribute": "time_smoking_in_months",
      "direct_transition": "Smoker_Attribute",
      "value": 1
    },
    "Before_1970_Probability": {
      "type": "SetAttribute",
      "attribute": "start_smoking_probability",
      "value": 0.424,
      "direct_transition": "Possible_Smoker"
    },
    "1970-1980_Probability": {
      "type": "SetAttribute",
      "attribute": "start_smoking_probability",
      "value": 0.371,
      "direct_transition": "Possible_Smoker"
    },
    "1980-1990_Probability": {
      "type": "SetAttribute",
      "attribute": "start_smoking_probability",
      "value": 0.301,
      "direct_transition": "Possible_Smoker"
    },
    "1990-2000_Probability": {
      "type": "SetAttribute",
      "attribute": "start_smoking_probability",
      "value": 0.247,
      "direct_transition": "Possible_Smoker"
    },
    "2000-2010_Probability": {
      "type": "SetAttribute",
      "attribute": "start_smoking_probability",
      "value": 0.209,
      "direct_transition": "Possible_Smoker"
    },
    "After_2010_Probability": {
      "type": "SetAttribute",
      "attribute": "start_smoking_probability",
      "value": 0.161,
      "direct_transition": "Possible_Smoker"
    },
    "Possible_Smoker": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "Start_Smoking",
          "distribution": {
            "attribute": "start_smoking_probability",
            "default": 0
          }
        },
        {
          "transition": "Start_Smoking_Delay",
          "distribution": {
            "attribute": "don't_start_smoking_probability",
            "default": 1
          }
        }
      ],
      "remarks": [
        "16.1% of MA are smokers in 2016.",
        "http://www.cdc.gov/tobacco/data_statistics/state_data/state_highlights/2010/states/massachusetts/",
        "but the rate is decreasing over time",
        "http://www.cdc.gov/tobacco/data_statistics/tables/trends/cig_smoking/",
        "selected #s:",
        "1965 - 42.4%",
        "1975 - 37.1%",
        "1985 - 30.1%",
        "1995 - 24.7%",
        "2005 - 20.9%",
        "2015 - 16.1%",
        "assume that it was never significantly higher than 42% pre 1960s, but will continue to drop slowly after 2016",
        "it's decreasing about .5% per year"
      ]
    },
    "Quit_Smoking_Attribute": {
      "type": "SetAttribute",
      "attribute": "smoker",
      "value": false,
      "direct_transition": "Adherence_Delay"
    },
    "Smoker_Attribute_Default": {
      "type": "SetAttribute",
      "attribute": "smoker",
      "direct_transition": "Smoking_Age_Guard",
      "value": false
    },
    "Quit_Probability_25-44": {
      "type": "SetAttribute",
      "attribute": "quit_smoking_probability",
      "value": 0.598,
      "direct_transition": "Decrease_Quit_Probability"
    },
    "Quit_Probability_45-64": {
      "type": "SetAttribute",
      "attribute": "quit_smoking_probability",
      "value": 0.496,
      "direct_transition": "Decrease_Quit_Probability"
    },
    "Quit_Probability_Over_65": {
      "type": "SetAttribute",
      "attribute": "quit_smoking_probability",
      "value": 0.472,
      "direct_transition": "Decrease_Quit_Probability"
    },
    "Quit_Probability_16-24": {
      "type": "SetAttribute",
      "attribute": "quit_smoking_probability",
      "value": 0.667,
      "direct_transition": "Decrease_Quit_Probability"
    },
    "Decrease_Quit_Probability": {
      "type": "Simple",
      "direct_transition": "Possible_Quitter",
      "remarks": [
        "This state will decrease the probability that a smoker quits based on the amount of time they have been smoking. Will have to use an expression."
      ]
    },
    "Time_Since_Quitting_Set": {
      "type": "SetAttribute",
      "attribute": "time_since_quitting_in_months",
      "direct_transition": "Adherence_Delay",
      "value": 0
    },
    "Adherence_Delay": {
      "type": "Delay",
      "exact": {
        "quantity": 1,
        "unit": "months"
      },
      "conditional_transition": [
        {
          "transition": "Terminal",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "time_since_quitting_in_weeks",
            "operator": ">",
            "value": 521
          }
        },
        {
          "transition": "Time_Since_Quitting_Increment",
          "condition": {
            "condition_type": "And",
            "conditions": [
              {
                "condition_type": "PriorState",
                "name": "Quit_Smoking_Care"
              },
              {
                "condition_type": "And",
                "conditions": [
                  {
                    "condition_type": "Attribute",
                    "attribute": "smoker",
                    "operator": "==",
                    "value": false
                  },
                  {
                    "condition_type": "Attribute",
                    "attribute": "time_since_quitting_in_weeks",
                    "operator": "<=",
                    "value": 521
                  }
                ]
              }
            ]
          }
        },
        {
          "transition": "Quit_Smoking_Care"
        }
      ]
    },
    "Time_Since_Quitting_Increment": {
      "type": "Counter",
      "attribute": "time_since_quitting_in_months",
      "action": "increment",
      "direct_transition": "Adherence_Probability_Based_On_Time"
    },
    "Quit_Smoking_Care": {
      "type": "Simple",
      "remarks": [
        "Among smokers who made quit attempts, 6.8% reported using counseling, 29.0% medication, and 4.7% both. Among smokers who used counseling, 4.1% used a telephone quitline, 2.8% used one-on-one counseling, and 2.4% used a stop smoking clinic, class, or support group. Among smokers who used medications, 16.6% used a nicotine patch, 12.5% used nicotine gum or lozenges, 7.9% used varenicline, 2.7% used bupropion, and 2.4% used nicotine spray or inhaler.",
        "https://www.cdc.gov/mmwr/volumes/65/wr/mm6552a1.htm?s_cid=mm6552a1_w%20"
      ],
      "distributed_transition": [
        {
          "transition": "Smoking_Cessation_Therapy_Medication",
          "distribution": 0.29
        },
        {
          "transition": "Smoking_Cessation_Therapy_Counseling",
          "distribution": 0.068
        },
        {
          "transition": "Possible_Adherence",
          "distribution": 0.595
        },
        {
          "transition": "Smoking_Cessation_Therapy_All",
          "distribution": 0.047
        }
      ]
    },
    "Possible_Adherence": {
      "type": "Simple",
      "complex_transition": [
        {
          "condition": {
            "condition_type": "PriorState",
            "name": "Smoking_Cessation_Therapy_Medication"
          },
          "distributions": [
            {
              "distribution": 0.783,
              "transition": "Smoker_Attribute"
            },
            {
              "distribution": 0.217,
              "transition": "Quit_Smoking_Attribute"
            }
          ]
        },
        {
          "condition": {
            "condition_type": "PriorState",
            "name": "Smoking_Cessation_Therapy_Counseling"
          },
          "distributions": [
            {
              "distribution": 0.854,
              "transition": "Smoker_Attribute"
            },
            {
              "distribution": 0.146,
              "transition": "Quit_Smoking_Attribute"
            }
          ]
        },
        {
          "condition": {
            "condition_type": "PriorState",
            "name": "Smoking_Cessation_Therapy_All"
          },
          "distributions": [
            {
              "distribution": 0.758,
              "transition": "Smoker_Attribute"
            },
            {
              "distribution": 0.242,
              "transition": "Quit_Smoking_Attribute"
            }
          ]
        },
        {
          "distributions": [
            {
              "distribution": 0.892,
              "transition": "Smoker_Attribute"
            },
            {
              "distribution": 0.108,
              "transition": "Quit_Smoking_Attribute"
            }
          ]
        }
      ],
      "remarks": [
        "https://www.ncbi.nlm.nih.gov/books/NBK63943/table/A29548/?report=objectonly",
        "https://www.ncbi.nlm.nih.gov/books/NBK63943/table/A29580/?report=objectonly",
        "https://www.ncbi.nlm.nih.gov/books/NBK63943/table/A29578/?report=objectonly"
      ]
    },
    "Quit_Smoking_Attempt": {
      "type": "Simple",
      "direct_transition": "Time_Since_Quitting_Set"
    },
    "Adherence_Probability_Based_On_Time": {
      "type": "SetAttribute",
      "attribute": "adherence_probability",
      "distributed_transition": [
        {
          "transition": "Adherence_Delay",
          "distribution": {
            "attribute": "adherence_probability",
            "default": 0.9
          }
        },
        {
          "transition": "Smoker_Attribute",
          "distribution": {
            "attribute": "non_adherence_probability",
            "default": 0.1
          }
        }
      ],
      "remarks": [
        "Would have to use an expression to determine a probability based on time since quitting. Gets processed if the patient has gone through the Quit_Smoking_Care state and is not currently a smoker."
      ],
      "value": 0.9
    },
    "Possible_Quitter": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "Quit_Smoking_Attempt",
          "distribution": {
            "attribute": "quit_smoking_probability",
            "default": 0.5
          }
        },
        {
          "transition": "Time_Smoking",
          "distribution": {
            "attribute": "not_quit_smoking_probability",
            "default": 0.5
          }
        }
      ]
    },
    "Smoking_Cessation_Therapy_All": {
      "type": "CarePlanStart",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 710081004,
          "display": "Smoking cessation therapy"
        }
      ],
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": 384742004,
          "display": "Smoking cessation assistance"
        },
        {
          "system": "SNOMED-CT",
          "code": 713700008,
          "display": "Smoking cessation drug therapy"
        }
      ],
      "direct_transition": "Possible_Adherence"
    },
    "Smoking_Cessation_Therapy_Counseling": {
      "type": "CarePlanStart",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 710081004,
          "display": "Smoking cessation therapy"
        }
      ],
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": 384742004,
          "display": "Smoking cessation assistance"
        }
      ],
      "direct_transition": "Possible_Adherence"
    },
    "Smoking_Cessation_Therapy_Medication": {
      "type": "CarePlanStart",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 710081004,
          "display": "Smoking cessation therapy"
        }
      ],
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": 713700008,
          "display": "Smoking cessation drug therapy"
        }
      ],
      "direct_transition": "Possible_Adherence"
    }
  }
}